<div class="p-4  d-flex justify-content-between align-items-center">
    <!-- Toggle Between Name and Capital Search -->
    <div>
        <mat-radio-group [(ngModel)]="searchBy" (change)="onSearch()">
            <mat-radio-button value="name">Search by Name</mat-radio-button>
            <mat-radio-button value="capital">Search by Capital</mat-radio-button>
        </mat-radio-group>
    </div>
    <!-- search input field -->
    <div>
        <mat-form-field appearance="outline">
            <input matInput [(ngModel)]="searchTerm" (ngModelChange)="onSearch()"
                placeholder="Search by name, capital...">
        </mat-form-field>
    </div>
    <div>
        <mat-slide-toggle class="example-margin" [checked]="checked" [disabled]="disabled" [(ngModel)]="isTableView">
            Toggle {{ isTableView ? 'Table' : 'Card' }} View
        </mat-slide-toggle>
    </div>
</div>

<!-- country data listing card view-->
<div *ngIf="!isTableView; else elseBlock">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 p-4">
        <mat-card *ngFor="let country of filteredCountries$ | async" (click)="openCountryDetailDialog(country)"
            class="cursor-pointer" appearance="outlined">
            <mat-card-header>
                <mat-card-title class="text-xl my-2">{{ country.name.common }}</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <p><strong>Region:</strong> {{ country.region }}</p>
                <p><strong>Capital:</strong> {{ country.capital }}</p>
                <p><strong>Continent:</strong> {{ country.continents }}</p>
                <p><strong>Population:</strong> {{ country.population }}</p>
                <p><strong>Timezone:</strong> {{ country.timezones }}</p>
            </mat-card-content>
        </mat-card>
    </div>
</div>

<!-- Table view -->
<ng-template #elseBlock>
    <table mat-table [dataSource]="filteredCountries$ | async" class="mat-elevation-z8">

        <!-- Country Name Column -->
        <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef> Name </th>
            <td mat-cell *matCellDef="let country"> {{ country.name.common }} </td>
        </ng-container>

        <!-- Region Column -->
        <ng-container matColumnDef="region">
            <th mat-header-cell *matHeaderCellDef> Region </th>
            <td mat-cell *matCellDef="let country"> {{ country.region }} </td>
        </ng-container>

        <!-- Capital Column -->
        <ng-container matColumnDef="capital">
            <th mat-header-cell *matHeaderCellDef> Capital </th>
            <td mat-cell *matCellDef="let country"> {{ country.capital }} </td>
        </ng-container>

        <!-- Population Column -->
        <ng-container matColumnDef="continents">
            <th mat-header-cell *matHeaderCellDef> Continent </th>
            <td mat-cell *matCellDef="let country"> {{ country.continents }} </td>
        </ng-container>

        <!-- Population Column -->
        <ng-container matColumnDef="population">
            <th mat-header-cell *matHeaderCellDef> Population </th>
            <td mat-cell *matCellDef="let country"> {{ country.population }} </td>
        </ng-container>

        <!-- Table Header and Row -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
</ng-template>